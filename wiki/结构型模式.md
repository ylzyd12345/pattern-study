# ç»“æ„å‹æ¨¡å¼è¯¦è§£

ç»“æ„å‹æ¨¡å¼å…³æ³¨ç±»å’Œå¯¹è±¡çš„ç»„åˆï¼Œé€šè¿‡ç»„åˆå®ƒä»¬æ¥å½¢æˆæ›´å¤§çš„ç»“æ„ï¼Œä½¿å¾—ç³»ç»Ÿæ›´åŠ çµæ´»å’Œå¯æ‰©å±•ã€‚

## ğŸ“‹ æ¨¡å¼æ¦‚è§ˆ

| æ¨¡å¼ | è‹±æ–‡å | éš¾åº¦ | ä½¿ç”¨é¢‘ç‡ | æ ¸å¿ƒæ€æƒ³ |
|------|--------|------|----------|----------|
| é€‚é…å™¨æ¨¡å¼ | Adapter | â­â­ | â­â­â­â­â­ | æ¥å£è½¬æ¢ï¼Œå…¼å®¹ä¸åŒæ¥å£ |
| æ¡¥æ¥æ¨¡å¼ | Bridge | â­â­â­ | â­â­â­ | åˆ†ç¦»æŠ½è±¡å’Œå®ç° |
| ç»„åˆæ¨¡å¼ | Composite | â­â­â­ | â­â­â­â­ | æ ‘å½¢ç»“æ„ï¼Œç»Ÿä¸€å¤„ç† |
| è£…é¥°å™¨æ¨¡å¼ | Decorator | â­â­ | â­â­â­â­â­ | åŠ¨æ€æ·»åŠ åŠŸèƒ½ |
| å¤–è§‚æ¨¡å¼ | Facade | â­ | â­â­â­â­â­ | ç®€åŒ–å¤æ‚ç³»ç»Ÿ |
| äº«å…ƒæ¨¡å¼ | Flyweight | â­â­â­â­ | â­â­ | å¯¹è±¡å…±äº«ï¼Œå‡å°‘å†…å­˜ |
| ä»£ç†æ¨¡å¼ | Proxy | â­â­ | â­â­â­â­â­ | æ§åˆ¶å¯¹è±¡è®¿é—® |

## ğŸ”Œ é€‚é…å™¨æ¨¡å¼ (Adapter)

### æ¨¡å¼å®šä¹‰
å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·ç«¯å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ï¼Œä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚

### UMLç±»å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Client       â”‚    â”‚    Target       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚    â”‚ + request()     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â–²
         â”‚                       â”‚
         â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚              â”‚   Adapter       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                 â”‚
                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                        â”‚ - adaptee:      â”‚
                        â”‚   Adaptee       â”‚
                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                        â”‚ + request()     â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚    Adaptee      â”‚
                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                        â”‚ + specificRequestâ”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä»£ç å®ç°

#### ç›®æ ‡æ¥å£
```java
public interface Target {
    void request();
}
```

#### é€‚é…è€…ç±»
```java
public class Adaptee {
    public void specificRequest() {
        System.out.println("Adaptee's specific request");
    }
}
```

#### é€‚é…å™¨ç±»
```java
public class Adapter implements Target {
    private Adaptee adaptee;
    
    public Adapter(Adaptee adaptee) {
        this.adaptee = adaptee;
    }
    
    @Override
    public void request() {
        adaptee.specificRequest();
    }
}
```

#### ä½¿ç”¨ç¤ºä¾‹
```java
public class AdapterDemo {
    public static void main(String[] args) {
        Adaptee adaptee = new Adaptee();
        Target adapter = new Adapter(adaptee);
        adapter.request();
    }
}
```

### åº”ç”¨åœºæ™¯
- é—ç•™ä»£ç é›†æˆ
- ç¬¬ä¸‰æ–¹åº“é€‚é…
- ä¸åŒæ¥å£ç»Ÿä¸€
- å¤šæ•°æ®æºé€‚é…

### ä¼˜ç¼ºç‚¹
**ä¼˜ç‚¹**ï¼š
- æé«˜ç±»çš„å¤ç”¨æ€§
- å¢åŠ ç±»çš„é€æ˜åº¦
- çµæ´»æ€§å¥½

**ç¼ºç‚¹**ï¼š
- è¿‡å¤šä½¿ç”¨ä¼šä½¿ç³»ç»Ÿå¤æ‚
- å¢åŠ ä»£ç ç†è§£éš¾åº¦

## ğŸŒ‰ æ¡¥æ¥æ¨¡å¼ (Bridge)

### æ¨¡å¼å®šä¹‰
å°†æŠ½è±¡éƒ¨åˆ†ä¸å®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚

### UMLç±»å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Abstraction   â”‚    â”‚   Implementor   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - implementor:  â”‚    â”‚ + operationImp()â”‚
â”‚   Implementor   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â–²
â”‚ + operation()   â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
         â–²                       â”‚
         â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚ConcreteImplementâ”‚
â”‚ RefinedAbstractionâ”‚      â”‚or              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + operation()   â”‚      â”‚ + operationImp()â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä»£ç å®ç°

#### å®ç°æ¥å£
```java
public interface Implementor {
    void operationImp();
}
```

#### å…·ä½“å®ç°
```java
public class ConcreteImplementorA implements Implementor {
    @Override
    public void operationImp() {
        System.out.println("Concrete Implementor A");
    }
}

public class ConcreteImplementorB implements Implementor {
    @Override
    public void operationImp() {
        System.out.println("Concrete Implementor B");
    }
}
```

#### æŠ½è±¡ç±»
```java
public abstract class Abstraction {
    protected Implementor implementor;
    
    public Abstraction(Implementor implementor) {
        this.implementor = implementor;
    }
    
    public abstract void operation();
}
```

#### æ‰©å±•æŠ½è±¡ç±»
```java
public class RefinedAbstraction extends Abstraction {
    public RefinedAbstraction(Implementor implementor) {
        super(implementor);
    }
    
    @Override
    public void operation() {
        System.out.println("Refined Abstraction");
        implementor.operationImp();
    }
}
```

### åº”ç”¨åœºæ™¯
- å¤šç»´åº¦å˜åŒ–çš„ç³»ç»Ÿ
- éœ€è¦é¿å…ç»§æ‰¿å±‚æ¬¡è¿‡å¤š
- è·¨å¹³å°åº”ç”¨
- ä¸»é¢˜åˆ‡æ¢ç³»ç»Ÿ

### ä¼˜ç¼ºç‚¹
**ä¼˜ç‚¹**ï¼š
- åˆ†ç¦»æŠ½è±¡å’Œå®ç°
- æ‰©å±•èƒ½åŠ›å¼º
- ç¬¦åˆå¼€é—­åŸåˆ™

**ç¼ºç‚¹**ï¼š
- å¢åŠ ç³»ç»Ÿç†è§£éš¾åº¦
- éœ€è¦æ­£ç¡®è¯†åˆ«ç‹¬ç«‹å˜åŒ–çš„ç»´åº¦

## ğŸŒ³ ç»„åˆæ¨¡å¼ (Composite)

### æ¨¡å¼å®šä¹‰
å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤º"éƒ¨åˆ†-æ•´ä½“"çš„å±‚æ¬¡ç»“æ„ï¼Œä½¿å¾—å®¢æˆ·ç«¯å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚

### UMLç±»å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Component    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + operation()   â”‚
â”‚ + add()         â”‚
â”‚ + remove()      â”‚
â”‚ + getChild()    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²
         â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Leaf    â”‚  â”‚ Composite   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + operation()â”‚ â”‚ - children:â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   List<Component>â”‚
               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
               â”‚ + operation()â”‚
               â”‚ + add()      â”‚
               â”‚ + remove()   â”‚
               â”‚ + getChild() â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä»£ç å®ç°

#### ç»„ä»¶æ¥å£
```java
public interface Component {
    void operation();
    void add(Component component);
    void remove(Component component);
    Component getChild(int i);
}
```

#### å¶å­èŠ‚ç‚¹
```java
public class Leaf implements Component {
    private String name;
    
    public Leaf(String name) {
        this.name = name;
    }
    
    @Override
    public void operation() {
        System.out.println("Leaf " + name + " operation");
    }
    
    @Override
    public void add(Component component) {
        throw new UnsupportedOperationException();
    }
    
    @Override
    public void remove(Component component) {
        throw new UnsupportedOperationException();
    }
    
    @Override
    public Component getChild(int i) {
        throw new UnsupportedOperationException();
    }
}
```

#### ç»„åˆèŠ‚ç‚¹
```java
import java.util.ArrayList;
import java.util.List;

public class Composite implements Component {
    private List<Component> children = new ArrayList<>();
    private String name;
    
    public Composite(String name) {
        this.name = name;
    }
    
    @Override
    public void operation() {
        System.out.println("Composite " + name + " operation");
        for (Component child : children) {
            child.operation();
        }
    }
    
    @Override
    public void add(Component component) {
        children.add(component);
    }
    
    @Override
    public void remove(Component component) {
        children.remove(component);
    }
    
    @Override
    public Component getChild(int i) {
        return children.get(i);
    }
}
```

### åº”ç”¨åœºæ™¯
- æ–‡ä»¶ç³»ç»Ÿ
- ç»„ç»‡æ¶æ„
- GUIç»„ä»¶æ ‘
- èœå•ç³»ç»Ÿ

### ä¼˜ç¼ºç‚¹
**ä¼˜ç‚¹**ï¼š
- å®šä¹‰äº†åŸºæœ¬å¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ç±»å±‚æ¬¡ç»“æ„
- ç®€åŒ–å®¢æˆ·ç«¯ä»£ç 
- ç¬¦åˆå¼€é—­åŸåˆ™

**ç¼ºç‚¹**ï¼š
- è®¾è®¡å¤æ‚
- éš¾ä»¥é™åˆ¶ç»„åˆä¸­çš„ç»„ä»¶ç±»å‹

## ğŸ¨ è£…é¥°å™¨æ¨¡å¼ (Decorator)

### æ¨¡å¼å®šä¹‰
åŠ¨æ€åœ°ç»™å¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ï¼Œå°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œè£…é¥°å™¨æ¨¡å¼ç›¸æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚

### UMLç±»å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Component     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + operation()   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²
         â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ConcreteComâ”‚  â”‚  Decorator  â”‚
â”‚ponent     â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ - component:â”‚
â”‚ + operation()â”‚ â”‚   Component â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
             â”‚ + operation()â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â–²
                      â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ConcreteDecoratorâ”‚ â”‚ConcreteDecoratorâ”‚
    â”‚A                â”‚ â”‚B                â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ + operation()   â”‚ â”‚ + operation()   â”‚
    â”‚ + addedBehaviorAâ”‚ â”‚ + addedBehaviorBâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä»£ç å®ç°

#### ç»„ä»¶æ¥å£
```java
public interface Component {
    void operation();
}
```

#### å…·ä½“ç»„ä»¶
```java
public class ConcreteComponent implements Component {
    @Override
    public void operation() {
        System.out.println("ConcreteComponent operation");
    }
}
```

#### è£…é¥°å™¨åŸºç±»
```java
public class Decorator implements Component {
    protected Component component;
    
    public Decorator(Component component) {
        this.component = component;
    }
    
    @Override
    public void operation() {
        component.operation();
    }
}
```

#### å…·ä½“è£…é¥°å™¨
```java
public class ConcreteDecoratorA extends Decorator {
    public ConcreteDecoratorA(Component component) {
        super(component);
    }
    
    @Override
    public void operation() {
        super.operation();
        addedBehaviorA();
    }
    
    private void addedBehaviorA() {
        System.out.println("Added behavior A");
    }
}

public class ConcreteDecoratorB extends Decorator {
    public ConcreteDecoratorB(Component component) {
        super(component);
    }
    
    @Override
    public void operation() {
        addedBehaviorB();
        super.operation();
    }
    
    private void addedBehaviorB() {
        System.out.println("Added behavior B");
    }
}
```

### åº”ç”¨åœºæ™¯
- Java IOæµ
- GUIç»„ä»¶å¢å¼º
- åŠ¨æ€åŠŸèƒ½æ·»åŠ 
- ä¸­é—´ä»¶å¤„ç†

### ä¼˜ç¼ºç‚¹
**ä¼˜ç‚¹**ï¼š
- ä¸æ”¹å˜åŸæœ‰å¯¹è±¡ç»“æ„
- æ¯”ç»§æ‰¿æ›´çµæ´»
- ç¬¦åˆå¼€é—­åŸåˆ™

**ç¼ºç‚¹**ï¼š
- äº§ç”Ÿæ›´å¤šå°å¯¹è±¡
- æ’æŸ¥é—®é¢˜å¤æ‚

## ğŸª å¤–è§‚æ¨¡å¼ (Facade)

### æ¨¡å¼å®šä¹‰
ä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œå¤–è§‚æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚

### UMLç±»å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Client      â”‚    â”‚     Facade      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚    â”‚ - subsystem1:   â”‚
â”‚                 â”‚    â”‚   SubSystem1    â”‚
â”‚                 â”‚    â”‚ - subsystem2:   â”‚
â”‚                 â”‚    â”‚   SubSystem2    â”‚
â”‚                 â”‚    â”‚ - subsystem3:   â”‚
â”‚                 â”‚    â”‚   SubSystem3    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚              â”‚ + operation()   â”‚
         â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚
         â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚              â”‚                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ SubSystem1  â”‚ â”‚ SubSystem2  â”‚ â”‚ SubSystem3  â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ + method1() â”‚ â”‚ + method2() â”‚ â”‚ + method3() â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä»£ç å®ç°

#### å­ç³»ç»Ÿç±»
```java
public class SubSystem1 {
    public void method1() {
        System.out.println("SubSystem1 method1");
    }
}

public class SubSystem2 {
    public void method2() {
        System.out.println("SubSystem2 method2");
    }
}

public class SubSystem3 {
    public void method3() {
        System.out.println("SubSystem3 method3");
    }
}
```

#### å¤–è§‚ç±»
```java
public class Facade {
    private SubSystem1 subsystem1;
    private SubSystem2 subsystem2;
    private SubSystem3 subsystem3;
    
    public Facade() {
        this.subsystem1 = new SubSystem1();
        this.subsystem2 = new SubSystem2();
        this.subsystem3 = new SubSystem3();
    }
    
    public void operation() {
        subsystem1.method1();
        subsystem2.method2();
        subsystem3.method3();
    }
}
```

### åº”ç”¨åœºæ™¯
- å¤æ‚ç³»ç»Ÿç®€åŒ–
- APIè®¾è®¡
- ç¬¬ä¸‰æ–¹åº“å°è£…
- ç³»ç»Ÿåˆ†å±‚æ¶æ„

### ä¼˜ç¼ºç‚¹
**ä¼˜ç‚¹**ï¼š
- é™ä½ç³»ç»Ÿå¤æ‚åº¦
- æé«˜çµæ´»æ€§
- æé«˜å®‰å…¨æ€§

**ç¼ºç‚¹**ï¼š
- ä¸ç¬¦åˆå¼€é—­åŸåˆ™
- å¯èƒ½äº§ç”Ÿä¸Šå¸ç±»

## ğŸª¶ äº«å…ƒæ¨¡å¼ (Flyweight)

### æ¨¡å¼å®šä¹‰
è¿ç”¨å…±äº«æŠ€æœ¯æ¥æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ï¼Œé¿å…å¤§é‡ç›¸ä¼¼å¯¹è±¡çš„å¼€é”€ã€‚

### UMLç±»å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Flyweight     â”‚    â”‚ FlyweightFactoryâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + operation()   â”‚    â”‚ - flyweights:   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   Map<String,   â”‚
         â–²              â”‚   Flyweight>    â”‚
         â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚              â”‚ + getFlyweight()â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚ : Flyweight    â”‚
â”‚                 â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ConcreteFlyweightâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - intrinsicStateâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + operation()   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä»£ç å®ç°

#### äº«å…ƒæ¥å£
```java
public interface Flyweight {
    void operation(String extrinsicState);
}
```

#### å…·ä½“äº«å…ƒ
```java
public class ConcreteFlyweight implements Flyweight {
    private String intrinsicState;
    
    public ConcreteFlyweight(String intrinsicState) {
        this.intrinsicState = intrinsicState;
    }
    
    @Override
    public void operation(String extrinsicState) {
        System.out.println("Intrinsic: " + intrinsicState + 
                          ", Extrinsic: " + extrinsicState);
    }
}
```

#### äº«å…ƒå·¥å‚
```java
import java.util.HashMap;
import java.util.Map;

public class FlyweightFactory {
    private Map<String, Flyweight> flyweights = new HashMap<>();
    
    public Flyweight getFlyweight(String key) {
        Flyweight flyweight = flyweights.get(key);
        if (flyweight == null) {
            flyweight = new ConcreteFlyweight(key);
            flyweights.put(key, flyweight);
        }
        return flyweight;
    }
    
    public int getFlyweightCount() {
        return flyweights.size();
    }
}
```

### åº”ç”¨åœºæ™¯
- æ–‡æœ¬ç¼–è¾‘å™¨
- æ¸¸æˆå¯¹è±¡
- æ•°æ®åº“è¿æ¥æ± 
- ç¼“å­˜ç³»ç»Ÿ

### ä¼˜ç¼ºç‚¹
**ä¼˜ç‚¹**ï¼š
- å‡å°‘å¯¹è±¡æ•°é‡
- èŠ‚çœå†…å­˜ç©ºé—´
- æé«˜æ€§èƒ½

**ç¼ºç‚¹**ï¼š
- å¢åŠ ç³»ç»Ÿå¤æ‚æ€§
- éœ€è¦åˆ†ç¦»å†…å¤–çŠ¶æ€

## ğŸ›¡ï¸ ä»£ç†æ¨¡å¼ (Proxy)

### æ¨¡å¼å®šä¹‰
ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚

### UMLç±»å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Subject      â”‚    â”‚     Client      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + request()     â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²                       â”‚
         â”‚                       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
    â”‚                 â”‚           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚RealSubjectâ”‚  â”‚   Proxy     â”‚â—„â”€â”€â”€â”˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + request()â”‚ â”‚ - realSubjectâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚   : RealSubjectâ”‚
             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
             â”‚ + request()   â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä»£ç å®ç°

#### ä¸»é¢˜æ¥å£
```java
public interface Subject {
    void request();
}
```

#### çœŸå®ä¸»é¢˜
```java
public class RealSubject implements Subject {
    @Override
    public void request() {
        System.out.println("RealSubject: Handling request");
    }
}
```

#### ä»£ç†ç±»
```java
public class Proxy implements Subject {
    private RealSubject realSubject;
    
    @Override
    public void request() {
        if (realSubject == null) {
            realSubject = new RealSubject();
        }
        
        preRequest();
        realSubject.request();
        postRequest();
    }
    
    private void preRequest() {
        System.out.println("Proxy: Pre-request processing");
    }
    
    private void postRequest() {
        System.out.println("Proxy: Post-request processing");
    }
}
```

### ä»£ç†ç±»å‹

#### 1. è¿œç¨‹ä»£ç†
```java
public class RemoteProxy implements Subject {
    private String remoteHost;
    private int remotePort;
    
    public RemoteProxy(String host, int port) {
        this.remoteHost = host;
        this.remotePort = port;
    }
    
    @Override
    public void request() {
        // è¿œç¨‹è°ƒç”¨é€»è¾‘
        System.out.println("Remote call to " + remoteHost + ":" + remotePort);
    }
}
```

#### 2. è™šæ‹Ÿä»£ç†
```java
public class VirtualProxy implements Subject {
    private RealSubject realSubject;
    private boolean loaded = false;
    
    @Override
    public void request() {
        if (!loaded) {
            realSubject = new RealSubject();
            loaded = true;
        }
        realSubject.request();
    }
}
```

#### 3. ä¿æŠ¤ä»£ç†
```java
public class ProtectionProxy implements Subject {
    private RealSubject realSubject;
    private String userRole;
    
    public ProtectionProxy(RealSubject realSubject, String userRole) {
        this.realSubject = realSubject;
        this.userRole = userRole;
    }
    
    @Override
    public void request() {
        if ("admin".equals(userRole)) {
            realSubject.request();
        } else {
            System.out.println("Access denied");
        }
    }
}
```

### åº”ç”¨åœºæ™¯
- è¿œç¨‹ä»£ç†
- è™šæ‹Ÿä»£ç†
- ä¿æŠ¤ä»£ç†
- æ™ºèƒ½å¼•ç”¨

### ä¼˜ç¼ºç‚¹
**ä¼˜ç‚¹**ï¼š
- èŒè´£æ¸…æ™°
- ä¿æŠ¤å¯¹è±¡
- æ™ºèƒ½åŒ–æ“ä½œ

**ç¼ºç‚¹**ï¼š
- å¢åŠ å¤æ‚æ€§
- å“åº”æ—¶é—´å¢åŠ 

## ğŸ”— æ¨¡å¼å¯¹æ¯”

| æ¨¡å¼ | ä¸»è¦ç›®çš„ | ç»“æ„ç‰¹ç‚¹ | å¤æ‚åº¦ | å…¸å‹åº”ç”¨ |
|------|----------|----------|--------|----------|
| é€‚é…å™¨ | æ¥å£å…¼å®¹ | åŒ…è£…è½¬æ¢ | ä¸­ | é—ç•™ç³»ç»Ÿé›†æˆ |
| æ¡¥æ¥ | åˆ†ç¦»ç»´åº¦ | æŠ½è±¡å®ç°åˆ†ç¦» | é«˜ | è·¨å¹³å°ç³»ç»Ÿ |
| ç»„åˆ | æ ‘å½¢ç»“æ„ | é€’å½’ç»„åˆ | ä¸­ | æ–‡ä»¶ç³»ç»Ÿ |
| è£…é¥°å™¨ | åŠŸèƒ½æ‰©å±• | åŠ¨æ€åŒ…è£… | ä¸­ | IOæµå¤„ç† |
| å¤–è§‚ | ç®€åŒ–æ¥å£ | ç»Ÿä¸€å…¥å£ | ä½ | APIè®¾è®¡ |
| äº«å…ƒ | å¯¹è±¡å…±äº« | å†…å¤–çŠ¶æ€åˆ†ç¦» | é«˜ | æ€§èƒ½ä¼˜åŒ– |
| ä»£ç† | è®¿é—®æ§åˆ¶ | ä»£ç†æ§åˆ¶ | ä¸­ | å®‰å…¨æ§åˆ¶ |

## ğŸ¯ é€‰æ‹©æŒ‡å—

### é€‰æ‹©é€‚é…å™¨æ¨¡å¼å½“ï¼š
- éœ€è¦é›†æˆå·²æœ‰ç³»ç»Ÿ
- æ¥å£ä¸å…¼å®¹
- éœ€è¦ç»Ÿä¸€å¤šä¸ªæ¥å£

### é€‰æ‹©æ¡¥æ¥æ¨¡å¼å½“ï¼š
- å¤šä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦
- éœ€è¦é¿å…ç»§æ‰¿çˆ†ç‚¸
- è·¨å¹³å°å®ç°

### é€‰æ‹©ç»„åˆæ¨¡å¼å½“ï¼š
- éœ€è¦è¡¨ç¤ºæ ‘å½¢ç»“æ„
- å¸Œæœ›ç»Ÿä¸€å¤„ç†å•ä¸ªå’Œç»„åˆå¯¹è±¡
- é€’å½’ç»“æ„

### é€‰æ‹©è£…é¥°å™¨æ¨¡å¼å½“ï¼š
- éœ€è¦åŠ¨æ€æ·»åŠ åŠŸèƒ½
- ä¸ä½¿ç”¨ç»§æ‰¿æ‰©å±•
- åŠŸèƒ½å¯ç»„åˆ

### é€‰æ‹©å¤–è§‚æ¨¡å¼å½“ï¼š
- ç³»ç»Ÿè¿‡äºå¤æ‚
- éœ€è¦ç®€åŒ–æ¥å£
- åˆ†å±‚æ¶æ„

### é€‰æ‹©äº«å…ƒæ¨¡å¼å½“ï¼š
- å¤§é‡ç›¸ä¼¼å¯¹è±¡
- å†…å­˜ä½¿ç”¨æ•æ„Ÿ
- å¯¹è±¡å¯å…±äº«

### é€‰æ‹©ä»£ç†æ¨¡å¼å½“ï¼š
- éœ€è¦æ§åˆ¶è®¿é—®
- è¿œç¨‹è°ƒç”¨
- å»¶è¿ŸåŠ è½½

## ğŸ“š å®é™…åº”ç”¨

### JDKä¸­çš„åº”ç”¨
- `java.io.InputStreamReader` - é€‚é…å™¨æ¨¡å¼
- `java.awt.BorderLayout` - æ¡¥æ¥æ¨¡å¼
- `java.util.ArrayList` - ç»„åˆæ¨¡å¼
- `java.io.BufferedInputStream` - è£…é¥°å™¨æ¨¡å¼
- `java.lang.Class` - å¤–è§‚æ¨¡å¼
- `java.lang.String` - äº«å…ƒæ¨¡å¼
- `java.lang.reflect.Proxy` - ä»£ç†æ¨¡å¼

### Springä¸­çš„åº”ç”¨
- `HandlerAdapter` - é€‚é…å™¨æ¨¡å¼
- `DataSource` - æ¡¥æ¥æ¨¡å¼
- `CompositeController` - ç»„åˆæ¨¡å¼
- `TransactionProxy` - ä»£ç†æ¨¡å¼

### æœ€ä½³å®è·µ
1. **ä¼˜å…ˆç»„åˆ**ï¼šç»„åˆä¼˜äºç»§æ‰¿
2. **æ¥å£è®¾è®¡**ï¼šè‰¯å¥½çš„æ¥å£è®¾è®¡æ˜¯å…³é”®
3. **æ€§èƒ½è€ƒè™‘**ï¼šæ³¨æ„æ¨¡å¼å¯¹æ€§èƒ½çš„å½±å“
4. **æ–‡æ¡£åŒ–**ï¼šè®°å½•æ¨¡å¼çš„ä½¿ç”¨åŸå› 

---

ç»“æ„å‹æ¨¡å¼å¸®åŠ©æˆ‘ä»¬æ„å»ºæ›´çµæ´»ã€å¯ç»´æŠ¤çš„ç³»ç»Ÿæ¶æ„ã€‚è®°ä½ï¼šé€‰æ‹©åˆé€‚çš„æ¨¡å¼ï¼Œè€Œä¸æ˜¯æœ€å¤æ‚çš„æ¨¡å¼ã€‚